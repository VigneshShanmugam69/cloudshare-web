<app-topbar></app-topbar>
<!-- <div class="accounts">
    <div class="accountlists">
        <button class="acountlist-button" mat-button (click)="userList()">Account1</button>
        <br>
        <button class="acountlist-button" mat-button (click)="userList()">Account2</button>
        <br>
        <button class="acountlist-button" mat-button (click)="userList()">Account3</button>
    </div>
</div> -->
<!-- <div>
    <div class="user-card">
        <img class="adduser-image" type="button" (click)="showForm()"  src="../../../assets/adduser.png" alt="adduserimage">
        <span class="adduser-text">Add user</span>
        <img class="updateuser-image" src="../../../assets/updateuser.png" alt="adduserimage">
        <span class="updateuser-text">Update user</span>
        <img class="deleteuser-image" src="../../../assets/deleteuser.png" alt="adduserimage">
        <span class="deleteuser-text">Delete user</span>
    </div>


</div> -->

<div>

    <div class="tables">
        <div class="add-btn-div">
            <button class="add-button" *ngIf="!tableName">sync</button>
            <button class="add-button" *ngIf="!tableName"(click)="removePopup()">Remove</button>
            <button class="add-button" (click)="adduser()">Add</button>
        </div>
        <div>
            <table *ngIf="tableName; else directory" class="resizable-table">
                <thead>
                    <tr>
                        <th (mousedown)="onResizeStart($event)"><input type=checkbox class="check"><span>Name<div class="resize-handle"></div></span></th>
                        <th (mousedown)="onResizeStart($event)">ID<div class="resize-handle"></div></th>
                        <th (mousedown)="onResizeStart($event)">Email<div class="resize-handle"></div></th>
                        <th>Status</th>
                        
                    </tr>
                </thead>
                <tbody *ngFor="let item of localuserlist">
                    <tr>
                        <td><input type=checkbox class="check">{{item.firstname}} {{item.lastname}}</td>
                        <td>{{item.id}}</td>
                        <td>{{item.email}}</td>
                        <td>{{item.status}}</td>
                    </tr>
                </tbody>
            </table>

            <ng-template #directory>
                <table class="resizable-table">
                    <thead>
                        <tr>
                            <th (mousedown)="onResizeStart($event)"><input type=checkbox class="check">Name<div class="resize-handle"></div></th>
                            <th (mousedown)="onResizeStart($event)">UserID<div class="resize-handle"></div></th>
                            <th (mousedown)="onResizeStart($event)">Email<div class="resize-handle"></div></th>
                            <th (mousedown)="onResizeStart($event)">Status <div class="resize-handle"></div></th>
                            <th>AD Group</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let item of directoryuser">
                        <tr>
                            <td><input type=checkbox class="check" (click)="userId=item.id">{{item.firstname}} {{item.lastname}}</td>
                            <td>{{item.id}}</td>
                            <td>{{item.email}}</td>
                            <td>{{item.status}}</td>
                            <td>{{item.ADGroup}}</td>
                        </tr>
                    </tbody>
                </table>
            </ng-template>

        </div>


    </div>
    <div *ngIf="openPopup">
        <form class="adduserform" [formGroup]="adduserform" #check>
                <div class="adduserfield">
                    <div class="adduser-title">
                        <span>Add user</span>
                    </div>
                    <div>
                        <mat-form-field appearance="outline">
                            <mat-label>First name</mat-label>
                            <input formControlName="fname" matInput placeholder="Enter your First name">
                        </mat-form-field>
                    </div>
                    <div>
                        <mat-form-field appearance="outline">
                            <mat-label>last name</mat-label>
                            <input formControlName="lname" matInput placeholder="Enter your Last name">
                        </mat-form-field>
                    </div>
                    <div> <mat-form-field appearance="outline">
                            <mat-label>User name</mat-label>
                            <input formControlName="uname" matInput placeholder="Enter your User name">
                        </mat-form-field>
                    </div>
                    <div>
                        <mat-form-field appearance="outline">
                            <mat-label>Email id</mat-label>
                            <input formControlName="gmail" matInput placeholder="abc@gmail.com">
                        </mat-form-field>
                    </div>
                    <div class="slt-opt">
                         <select formControlName="type" class="slt-opt-fld" aria-label="Default select example">
                        <option selected>Select type</option>
                        <option value="local">Local</option>
                        <option value="directory">Directory</option>
                    </select>
                    </div>
                   <div class="slt-opt">
                     <select formControlName="roles" class="slt-opt-fld" aria-label="Default select example">
                        <option selected>Select role</option>
                        <option value="1">user</option>
                        <option value="2">admin</option>
                    </select>
                   </div>
                   
                </div>
                <div class="add-btn">
                    <button class="submit" (click)="addUser()">submit</button>
                    <button class="submit" (click)="cancel()">cancel</button>
                </div>
            </div>
            <div class="add-btn">
                <button class="submit" (click)="addUser()">submit</button>
                <button class="submit" (click)="this.openPopup = !this.openPopup;">cancel</button>
            </div>

        </form>
        <!-- </ng-template> -->
    </div>
    <div *ngIf="addpopup">
        <mat-card class="mt-size">
                    <div>
                        <mat-card class="mt-size-in">
                            <table class="resizable-table">
                                <thead>
                                    <tr>
                                        <th (mousedown)="onResizeStart($event)"><input type=checkbox class="check">Group Names<div class="resize-handle"></div></th>
                                        <th>GroupID</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let item of groups">
                                    <tr>
                                        <td><input type=checkbox  class="check" (click)="groupusers($event,item.groupName)">{{item.groupName}}</td>
                                        <td>{{item.groupId}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </mat-card>
                    </div>
                    <div>
                        <mat-card class="mt-size-in">
                            <table class="resizable-table">
                                <thead>
                                    <tr>
                                        <th (mousedown)="onResizeStart($event)"><input type=checkbox class="check">Users<div class="resize-handle"></div></th>
                                        <th>UserID</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let item of users">
                                    <tr>
                                        <td><input type=checkbox class="check">{{item.firstName}} {{item.lastName}}</td>
                                        <td>{{item.userId}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </mat-card>
                    </div>
                    <div>
                        <button class="import">Import</button>
                        <button class="import" (click)="this.addpopup=!this.addpopup;">cancel</button>
                    </div>
        </mat-card>
    </div>

    <!-- remove -->
    <div *ngIf="removepopup">
        <mat-card class="mt-size-re">
                    <div>
                        <mat-card class="mt-size-in">
                            <table class="resizable-table">
                                <thead>
                                    <tr>
                                        <th (mousedown)="onResizeStart($event)"><input type=checkbox class="check">Group Names<div class="resize-handle"></div></th>
                                        <th>GroupID</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let item of usergroups">
                                    <tr>
                                        <td><input type=checkbox  class="check" (click)="groupId=item.groupId">{{item.groupName}}</td>
                                        <td>{{item.groupId}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </mat-card>
                    </div>
                    <div>
                        <button class="import" (click)="removeuser()">Ok</button>
                        <button class="import" (click)="removepopup=!removepopup">cancel</button>
                    </div>
        </mat-card>
    </div>


</div>